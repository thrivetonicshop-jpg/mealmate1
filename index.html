<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#0a0a0a">
    <meta name="description" content="Best Meal Mate - AI-powered meal planning. Scan your fridge, get recipe suggestions, reduce food waste.">
    <title>Best Meal Mate - AI Meal Planning</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=Instrument+Serif&display=swap" rel="stylesheet">
    <style>
:root{--bg:#0a0a0a;--card:#141414;--elevated:#1a1a1a;--green:#22c55e;--orange:#f97316;--red:#ef4444;--blue:#3b82f6;--text:#fff;--muted:#a1a1aa;--dim:#52525b;--border:#27272a;--radius:16px;--safe-top:env(safe-area-inset-top,0);--safe-bottom:env(safe-area-inset-bottom,0)}
*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}
body{font-family:'DM Sans',system-ui,sans-serif;background:var(--bg);color:var(--text);min-height:100dvh;padding-top:var(--safe-top);padding-bottom:calc(80px + var(--safe-bottom))}
.header{position:fixed;top:0;left:0;right:0;padding:calc(var(--safe-top) + 12px) 20px 12px;background:linear-gradient(var(--bg) 60%,transparent);z-index:100;display:flex;justify-content:space-between;align-items:center}
.logo{display:flex;align-items:center;gap:10px;cursor:pointer}
.logo-icon{width:36px;height:36px;background:linear-gradient(135deg,var(--green),#16a34a);border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:20px}
.logo-text{font-family:'Instrument Serif',serif;font-size:24px}
.main{padding:80px 20px 20px;max-width:600px;margin:0 auto}
.greeting{margin-bottom:24px}
.greeting-sub{font-size:14px;color:var(--muted);margin-bottom:4px}
.greeting-main{font-family:'Instrument Serif',serif;font-size:32px}
.api-banner{background:linear-gradient(135deg,#1e3a5f,#1a1a2e);border:1px solid var(--blue);border-radius:var(--radius);padding:16px;margin-bottom:20px;display:none}
.api-banner.show{display:block}
.api-banner h4{font-size:14px;color:var(--blue);margin-bottom:8px}
.api-banner p{font-size:13px;color:var(--muted);margin-bottom:12px}
.api-banner input{flex:1;background:var(--bg);border:1px solid var(--border);border-radius:8px;padding:10px;color:var(--text);font-size:13px}
.api-banner button{background:var(--blue);border:none;border-radius:8px;padding:10px 16px;color:#fff;font-size:13px;font-weight:600;cursor:pointer}
.api-banner .row{display:flex;gap:8px}
.api-banner .close{float:right;background:none;border:none;color:var(--dim);cursor:pointer;font-size:18px}
.scanner-cta{background:linear-gradient(135deg,var(--green),#15803d);border-radius:var(--radius);padding:24px;margin-bottom:24px;cursor:pointer;position:relative;overflow:hidden}
.scanner-cta:active{transform:scale(.98)}
.scanner-cta .icon{width:56px;height:56px;background:rgba(255,255,255,.2);border-radius:14px;display:flex;align-items:center;justify-content:center;font-size:28px;margin-bottom:16px}
.scanner-cta h2{font-size:22px;font-weight:600;margin-bottom:6px}
.scanner-cta p{font-size:14px;opacity:.85}
.scanner-cta .arrow{position:absolute;right:24px;top:50%;transform:translateY(-50%);font-size:24px;opacity:.7}
.section-head{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}
.section-head h3{font-size:18px;font-weight:600}
.section-head a{font-size:14px;color:var(--green);cursor:pointer}
.expiring{display:flex;gap:12px;overflow-x:auto;padding-bottom:8px;margin-bottom:28px;scrollbar-width:none}
.expiring::-webkit-scrollbar{display:none}
.exp-item{flex-shrink:0;background:var(--card);border-radius:10px;padding:14px;min-width:130px;border:1px solid var(--border)}
.exp-item .emoji{font-size:32px;margin-bottom:8px}
.exp-item .name{font-size:14px;font-weight:500;margin-bottom:4px}
.exp-item .days{font-size:12px;padding:3px 8px;border-radius:20px;display:inline-block}
.exp-item .days.urgent{background:rgba(239,68,68,.15);color:var(--red)}
.exp-item .days.soon{background:rgba(249,115,22,.15);color:var(--orange)}
.exp-item .days.ok{background:rgba(34,197,94,.15);color:var(--green)}
.recipes-home{display:flex;flex-direction:column;gap:12px;margin-bottom:28px}
.recipe-card{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);padding:16px;display:flex;gap:14px;cursor:pointer}
.recipe-card:active{transform:scale(.98)}
.recipe-card .img{width:70px;height:70px;border-radius:10px;background:var(--elevated);display:flex;align-items:center;justify-content:center;font-size:32px}
.recipe-card .info{flex:1}
.recipe-card .match{font-size:11px;color:var(--green);font-weight:600;text-transform:uppercase;margin-bottom:4px}
.recipe-card .name{font-size:16px;font-weight:600;margin-bottom:4px}
.recipe-card .meta{font-size:12px;color:var(--muted)}
.recipe-card .missing{font-size:12px;color:var(--orange);margin-top:4px}
.actions{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:28px}
.action{background:var(--card);border:1px solid var(--border);border-radius:10px;padding:18px 16px;display:flex;align-items:center;gap:12px;cursor:pointer}
.action:active{transform:scale(.97)}
.action .icon{width:44px;height:44px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:22px}
.action .icon.pantry{background:rgba(249,115,22,.15)}
.action .icon.recipes{background:rgba(139,92,246,.15)}
.action .icon.grocery{background:rgba(59,130,246,.15)}
.action .icon.plan{background:rgba(34,197,94,.15)}
.action span{font-size:14px;font-weight:500}
.action .badge{background:var(--green);color:#fff;font-size:11px;padding:2px 8px;border-radius:10px;margin-left:auto}
.nav{position:fixed;bottom:0;left:0;right:0;background:var(--bg);border-top:1px solid var(--border);padding:8px 0 calc(8px + var(--safe-bottom));display:flex;justify-content:space-around;z-index:100}
.nav-item{display:flex;flex-direction:column;align-items:center;gap:4px;padding:8px 16px;color:var(--dim);cursor:pointer}
.nav-item.active{color:var(--green)}
.nav-item .icon{font-size:24px}
.nav-item .label{font-size:11px}
.nav-item .badge{position:absolute;top:4px;right:10px;background:var(--red);color:#fff;font-size:10px;min-width:18px;height:18px;border-radius:9px;display:flex;align-items:center;justify-content:center}
.view{display:none}
.view.active{display:block}
.pantry-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(100px,1fr));gap:10px}
.pantry-item{background:var(--card);border:1px solid var(--border);border-radius:10px;padding:14px 10px;text-align:center;cursor:pointer}
.pantry-item:active{transform:scale(.95)}
.pantry-item .emoji{font-size:32px;margin-bottom:8px}
.pantry-item .name{font-size:13px;font-weight:500}
.pantry-item .exp{font-size:11px;color:var(--muted);margin-top:4px}
.grocery-item{display:flex;align-items:center;gap:14px;background:var(--card);padding:14px 16px;border-radius:10px;margin-bottom:8px}
.grocery-item.checked{opacity:.5}
.grocery-item.checked .name{text-decoration:line-through}
.grocery-check{width:24px;height:24px;border-radius:50%;border:2px solid var(--border);display:flex;align-items:center;justify-content:center;cursor:pointer}
.grocery-check.checked{background:var(--green);border-color:var(--green);color:#fff}
.grocery-item .emoji{font-size:24px}
.grocery-item .info{flex:1}
.grocery-item .name{font-size:14px;font-weight:500}
.grocery-item .delete{color:var(--dim);cursor:pointer;font-size:18px}
.grocery-add{display:flex;gap:12px;margin-top:20px}
.grocery-add input{flex:1;background:var(--card);border:1px solid var(--border);border-radius:10px;padding:12px 16px;color:var(--text);font-size:14px}
.grocery-add button{background:var(--green);border:none;border-radius:10px;padding:12px 20px;color:#fff;font-size:20px;cursor:pointer}
.modal{position:fixed;top:0;left:0;right:0;bottom:0;background:var(--bg);z-index:1000;display:none;flex-direction:column}
.modal.active{display:flex}
.modal-header{position:absolute;top:0;left:0;right:0;padding:calc(var(--safe-top) + 16px) 20px 16px;background:linear-gradient(rgba(0,0,0,.8),transparent);display:flex;justify-content:space-between;align-items:center;z-index:10}
.modal-close{width:44px;height:44px;background:rgba(255,255,255,.15);border:none;border-radius:50%;color:#fff;font-size:24px;cursor:pointer;display:flex;align-items:center;justify-content:center}
.video-box{flex:1;position:relative;background:#000}
#camera-video{width:100%;height:100%;object-fit:cover}
.scan-overlay{position:absolute;top:0;left:0;right:0;bottom:0;pointer-events:none}
.scan-frame{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:280px;height:280px;border:2px solid rgba(255,255,255,.3);border-radius:24px}
.scan-frame::before,.scan-frame::after{content:'';position:absolute;width:40px;height:40px;border-color:var(--green);border-style:solid}
.scan-frame::before{top:-2px;left:-2px;border-width:4px 0 0 4px;border-radius:24px 0 0 0}
.scan-frame::after{top:-2px;right:-2px;border-width:4px 4px 0 0;border-radius:0 24px 0 0}
.scan-corners::before,.scan-corners::after{content:'';position:absolute;width:40px;height:40px;border-color:var(--green);border-style:solid}
.scan-corners::before{bottom:-2px;left:-2px;border-width:0 0 4px 4px;border-radius:0 0 0 24px}
.scan-corners::after{bottom:-2px;right:-2px;border-width:0 4px 4px 0;border-radius:0 0 24px 0}
.scan-line{position:absolute;top:0;left:10%;right:10%;height:3px;background:linear-gradient(90deg,transparent,var(--green),transparent);animation:scanMove 2s ease-in-out infinite}
@keyframes scanMove{0%,100%{top:10%;opacity:.5}50%{top:85%;opacity:1}}
.scan-hint{position:absolute;bottom:180px;left:50%;transform:translateX(-50%);color:#fff;font-size:15px;font-weight:500;text-shadow:0 2px 8px rgba(0,0,0,.5)}
.scan-controls{position:absolute;bottom:0;left:0;right:0;padding:24px 20px calc(24px + var(--safe-bottom));background:linear-gradient(transparent,rgba(0,0,0,.9))}
.capture-btn{width:80px;height:80px;border-radius:50%;background:#fff;border:4px solid var(--green);margin:0 auto;display:flex;align-items:center;justify-content:center;cursor:pointer}
.capture-btn:active{transform:scale(.92)}
.capture-btn-inner{width:64px;height:64px;border-radius:50%;background:var(--green);display:flex;align-items:center;justify-content:center;font-size:28px}
.scan-actions{display:flex;justify-content:space-around;margin-top:20px}
.scan-action{display:flex;flex-direction:column;align-items:center;gap:6px;background:none;border:none;color:#fff;cursor:pointer}
.scan-action .icon{width:48px;height:48px;background:rgba(255,255,255,.15);border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:22px}
.scan-action .label{font-size:12px;opacity:.8}
.scan-state{position:absolute;top:0;left:0;right:0;bottom:0;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px;text-align:center;background:var(--bg)}
.scan-state.hidden{display:none}
.scan-state .icon{font-size:64px;margin-bottom:20px}
.scan-state h3{font-size:22px;font-weight:600;margin-bottom:12px}
.scan-state p{font-size:15px;color:var(--muted);margin-bottom:24px;max-width:300px}
.scan-state button{background:var(--green);color:#fff;border:none;padding:14px 32px;font-size:16px;font-weight:600;border-radius:30px;cursor:pointer}
.results-bg{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.6);opacity:0;pointer-events:none;transition:opacity .3s;z-index:1000}
.results-bg.active{opacity:1;pointer-events:auto}
.results-modal{position:fixed;bottom:0;left:0;right:0;background:var(--bg);border-radius:24px 24px 0 0;padding:20px 20px calc(20px + var(--safe-bottom));max-height:80vh;overflow-y:auto;transform:translateY(100%);transition:transform .3s;z-index:1001}
.results-modal.active{transform:translateY(0)}
.results-handle{width:40px;height:4px;background:var(--border);border-radius:2px;margin:0 auto 20px}
.results-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}
.results-header h3{font-size:20px;font-weight:600}
.results-header button{width:36px;height:36px;background:var(--card);border:none;border-radius:50%;color:var(--muted);font-size:20px;cursor:pointer}
.results-preview{width:100%;aspect-ratio:4/3;border-radius:var(--radius);overflow:hidden;margin-bottom:20px;background:var(--card)}
.results-preview img{width:100%;height:100%;object-fit:cover}
.analyzing{text-align:center;padding:40px 20px}
.spinner{width:48px;height:48px;border:3px solid var(--border);border-top-color:var(--green);border-radius:50%;animation:spin 1s linear infinite;margin:0 auto 16px}
@keyframes spin{to{transform:rotate(360deg)}}
.detected-items{display:flex;flex-direction:column;gap:10px;margin-bottom:20px}
.detected-item{display:flex;align-items:center;gap:14px;background:var(--card);padding:14px;border-radius:10px}
.detected-item .emoji{font-size:28px}
.detected-item .info{flex:1}
.detected-item .name{font-weight:500;margin-bottom:2px}
.detected-item .qty{font-size:13px;color:var(--muted)}
.detected-item .check{width:28px;height:28px;border-radius:50%;border:2px solid var(--border);display:flex;align-items:center;justify-content:center;cursor:pointer}
.detected-item .check.checked{background:var(--green);border-color:var(--green);color:#fff}
.results-actions{display:flex;gap:12px}
.results-btn{flex:1;padding:16px;border-radius:14px;font-size:15px;font-weight:600;cursor:pointer;border:none}
.results-btn.secondary{background:var(--card);color:var(--text)}
.results-btn.primary{background:var(--green);color:#fff}
.results-btn:active{transform:scale(.97)}
.recipe-modal{position:fixed;top:0;left:0;right:0;bottom:0;background:var(--bg);z-index:1000;display:none;flex-direction:column;overflow-y:auto}
.recipe-modal.active{display:flex}
.recipe-modal-header{position:sticky;top:0;padding:calc(var(--safe-top) + 16px) 20px 16px;background:var(--bg);z-index:10;display:flex;justify-content:space-between}
.recipe-modal-close{width:44px;height:44px;background:var(--card);border:none;border-radius:50%;color:var(--text);font-size:24px;cursor:pointer}
.recipe-modal-content{padding:0 20px calc(100px + var(--safe-bottom))}
.recipe-modal-img{height:200px;background:var(--card);border-radius:var(--radius);display:flex;align-items:center;justify-content:center;font-size:80px;margin-bottom:24px}
.recipe-modal-title{font-family:'Instrument Serif',serif;font-size:28px;margin-bottom:12px}
.recipe-modal-meta{display:flex;gap:20px;margin-bottom:24px;font-size:14px;color:var(--muted)}
.recipe-modal-section{margin-bottom:24px}
.recipe-modal-section h4{font-size:16px;font-weight:600;margin-bottom:12px;color:var(--green)}
.recipe-modal-ing{display:flex;align-items:center;gap:12px;padding:12px;background:var(--card);border-radius:10px;margin-bottom:8px}
.recipe-modal-ing .check{width:24px;height:24px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:12px}
.recipe-modal-ing .check.have{background:var(--green);color:#fff}
.recipe-modal-ing .check.need{background:var(--orange);color:#fff}
.recipe-modal-ing .text{flex:1;font-size:14px}
.recipe-modal-ing .add{font-size:12px;color:var(--blue);cursor:pointer}
.recipe-modal-step{display:flex;gap:14px;margin-bottom:16px}
.recipe-modal-step .num{width:28px;height:28px;background:var(--green);border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:14px;font-weight:600;flex-shrink:0}
.recipe-modal-step .text{font-size:14px;line-height:1.6;color:var(--muted);padding-top:4px}
.recipe-modal-actions{position:fixed;bottom:0;left:0;right:0;padding:16px 20px calc(16px + var(--safe-bottom));background:var(--bg);border-top:1px solid var(--border);display:flex;gap:12px}
.recipe-modal-btn{flex:1;padding:16px;border-radius:10px;font-size:15px;font-weight:600;cursor:pointer;border:none;display:flex;align-items:center;justify-content:center;gap:8px}
.recipe-modal-btn.secondary{background:var(--card);color:var(--text)}
.recipe-modal-btn.primary{background:var(--green);color:#fff}
.onboarding{position:fixed;top:0;left:0;right:0;bottom:0;background:var(--bg);z-index:2000;display:none;flex-direction:column;align-items:center;justify-content:center;padding:40px;text-align:center}
.onboarding.active{display:flex}
.onboarding .icon{font-size:80px;margin-bottom:32px}
.onboarding h2{font-family:'Instrument Serif',serif;font-size:32px;margin-bottom:16px}
.onboarding p{font-size:16px;color:var(--muted);line-height:1.6;max-width:300px;margin-bottom:40px}
.onboarding-dots{display:flex;gap:8px;margin-bottom:32px}
.onboarding-dot{width:8px;height:8px;border-radius:4px;background:var(--border)}
.onboarding-dot.active{background:var(--green);width:24px}
.onboarding-btn{background:var(--green);color:#fff;border:none;padding:16px 48px;font-size:16px;font-weight:600;border-radius:30px;cursor:pointer}
.onboarding-skip{margin-top:16px;color:var(--dim);font-size:14px;cursor:pointer;background:none;border:none}
.toast{position:fixed;bottom:calc(100px + var(--safe-bottom));left:50%;transform:translateX(-50%) translateY(100px);background:var(--elevated);border:1px solid var(--border);padding:14px 24px;border-radius:30px;font-size:14px;font-weight:500;opacity:0;transition:all .3s;z-index:3000;display:flex;align-items:center;gap:10px}
.toast.active{transform:translateX(-50%) translateY(0);opacity:1}
.toast.success{border-color:var(--green)}
.toast.error{border-color:var(--red)}
.empty{text-align:center;padding:60px 20px}
.empty .icon{font-size:64px;margin-bottom:16px}
.empty h3{font-size:20px;font-weight:600;margin-bottom:8px}
.empty p{font-size:14px;color:var(--muted);margin-bottom:24px}
.empty button{background:var(--green);color:#fff;padding:14px 28px;border-radius:30px;font-size:15px;font-weight:600;cursor:pointer;border:none}
.category{margin-bottom:24px}
.category-header{display:flex;align-items:center;gap:10px;margin-bottom:12px}
.category-header .icon{font-size:20px}
.category-header .title{font-size:16px;font-weight:600}
.category-header .count{font-size:13px;color:var(--muted);margin-left:auto}
.recipe-tabs{display:flex;gap:8px;overflow-x:auto;padding-bottom:12px;margin-bottom:16px;scrollbar-width:none}
.recipe-tabs::-webkit-scrollbar{display:none}
.recipe-tab{padding:8px 16px;border-radius:20px;font-size:13px;font-weight:500;white-space:nowrap;cursor:pointer;background:var(--card);border:1px solid var(--border);color:var(--muted)}
.recipe-tab.active{background:var(--green);border-color:var(--green);color:#fff}
/* Legal/Settings Styles */
.legal-modal{position:fixed;top:0;left:0;right:0;bottom:0;background:var(--bg);z-index:2000;display:none;flex-direction:column;overflow-y:auto}
.legal-modal.active{display:flex}
.legal-header{position:sticky;top:0;padding:calc(var(--safe-top) + 16px) 20px 16px;background:var(--bg);border-bottom:1px solid var(--border);display:flex;align-items:center;gap:16px;z-index:10}
.legal-back{width:40px;height:40px;background:var(--card);border:none;border-radius:50%;color:var(--text);font-size:20px;cursor:pointer;display:flex;align-items:center;justify-content:center}
.legal-title{font-size:18px;font-weight:600}
.legal-content{padding:20px;line-height:1.7;color:var(--muted)}
.legal-content h2{font-size:18px;font-weight:600;color:var(--text);margin:24px 0 12px}
.legal-content h2:first-child{margin-top:0}
.legal-content p{margin-bottom:12px}
.legal-content ul{margin:12px 0;padding-left:24px}
.legal-content li{margin-bottom:8px}
.legal-content a{color:var(--green)}
.settings-list{padding:20px}
.settings-item{display:flex;align-items:center;gap:16px;padding:16px;background:var(--card);border-radius:12px;margin-bottom:12px;cursor:pointer;border:1px solid var(--border)}
.settings-item:active{transform:scale(.98)}
.settings-item .icon{font-size:24px}
.settings-item .info{flex:1}
.settings-item .label{font-size:15px;font-weight:500}
.settings-item .desc{font-size:12px;color:var(--muted);margin-top:2px}
.settings-item .arrow{color:var(--dim);font-size:18px}
.settings-section{font-size:12px;color:var(--dim);text-transform:uppercase;letter-spacing:.5px;margin:24px 0 12px;padding:0 4px}
.settings-section:first-child{margin-top:0}
.footer-links{display:flex;justify-content:center;gap:20px;padding:20px;margin-top:20px;border-top:1px solid var(--border)}
.footer-link{font-size:12px;color:var(--dim);cursor:pointer}
.footer-link:hover{color:var(--muted)}
.version-info{text-align:center;padding:20px;color:var(--dim);font-size:12px}
    </style>
</head>
<body>
<header class="header">
    <div class="logo"><div class="logo-icon">üç≥</div><span class="logo-text">Best Meal Mate</span></div>
    <button class="modal-close" id="settings-btn" style="background:var(--card);border:1px solid var(--border);width:40px;height:40px;font-size:18px">‚öôÔ∏è</button>
</header>
<main class="main">
    <div class="view active" id="home-view">
        <div class="greeting"><p class="greeting-sub" id="greeting-time">Good morning</p><h1 class="greeting-main">What's cooking today?</h1></div>
        <div class="api-banner" id="api-banner"><button class="close" id="dismiss-banner">√ó</button><h4>üîë Enable AI Scanner</h4><p>Add your Claude API key to enable real AI food recognition.</p><div class="row"><input type="password" id="api-key-input" placeholder="sk-ant-api03-..."><button id="save-api-key">Save</button></div></div>
        <div class="scanner-cta" id="open-scanner"><div class="icon">üì∑</div><h2>Scan Your Fridge</h2><p>AI identifies ingredients & suggests recipes</p><span class="arrow">‚Üí</span></div>
        <div class="section-head"><h3>Use Soon</h3><a id="view-pantry-link">View All</a></div>
        <div class="expiring" id="expiring-items"></div>
        <div class="section-head"><h3>Make With What You Have</h3><a id="view-recipes-link">See All</a></div>
        <div class="recipes-home" id="home-recipes"></div>
        <div class="section-head"><h3>Quick Actions</h3></div>
        <div class="actions">
            <div class="action" data-view="pantry"><div class="icon pantry">üßä</div><span>My Pantry</span><span class="badge" id="pantry-count">0</span></div>
            <div class="action" data-view="recipes"><div class="icon recipes">üìñ</div><span>Recipes</span></div>
            <div class="action" data-view="grocery"><div class="icon grocery">üõí</div><span>Grocery List</span><span class="badge" id="grocery-count" style="display:none">0</span></div>
            <div class="action" data-view="plan"><div class="icon plan">üìÖ</div><span>Meal Plan</span></div>
        </div>
        <div class="footer-links">
            <span class="footer-link" onclick="openLegal('privacy')">Privacy</span>
            <span class="footer-link" onclick="openLegal('terms')">Terms</span>
            <span class="footer-link" onclick="openLegal('settings')">Settings</span>
        </div>
    </div>
    <div class="view" id="pantry-view">
        <div class="greeting"><h1 class="greeting-main">My Pantry</h1></div>
        <div class="scanner-cta" id="open-scanner-pantry"><div class="icon">üì∑</div><h2>Add Items</h2><p>Scan to quickly add ingredients</p><span class="arrow">‚Üí</span></div>
        <div id="pantry-content"></div>
    </div>
    <div class="view" id="recipes-view">
        <div class="greeting"><h1 class="greeting-main">Recipes</h1><p style="color:var(--muted);font-size:14px;margin-top:4px">55 recipes</p></div>
        <div class="recipe-tabs" id="recipe-tabs">
            <div class="recipe-tab active" data-filter="all">All</div>
            <div class="recipe-tab" data-filter="breakfast">üç≥ Breakfast</div>
            <div class="recipe-tab" data-filter="lunch">ü•™ Lunch</div>
            <div class="recipe-tab" data-filter="dinner">üçΩÔ∏è Dinner</div>
            <div class="recipe-tab" data-filter="quick">‚ö° Quick</div>
            <div class="recipe-tab" data-filter="healthy">ü•ó Healthy</div>
            <div class="recipe-tab" data-filter="vegetarian">ü•¨ Vegetarian</div>
            <div class="recipe-tab" data-filter="comfort">üçï Comfort</div>
        </div>
        <div id="recipe-list"></div>
    </div>
    <div class="view" id="grocery-view">
        <div class="greeting"><h1 class="greeting-main">Grocery List</h1></div>
        <div style="display:flex;justify-content:space-between;margin-bottom:16px"><span id="grocery-status">0 items</span><span style="color:var(--red);cursor:pointer" id="clear-grocery">Clear All</span></div>
        <div id="grocery-list"></div>
        <div class="grocery-add"><input type="text" id="grocery-add-input" placeholder="Add item..."><button id="grocery-add-btn">+</button></div>
        <div style="margin-top:20px;text-align:center"><button style="background:var(--blue);border:none;padding:12px 24px;border-radius:10px;color:#fff;cursor:pointer" id="share-grocery">üì§ Share List</button></div>
    </div>
    <div class="view" id="plan-view">
        <div class="greeting"><h1 class="greeting-main">Meal Plan</h1></div>
        <div class="empty"><div class="icon">üìÖ</div><h3>Coming Soon</h3><p>Plan your meals for the week</p></div>
    </div>
</main>
<nav class="nav">
    <div class="nav-item active" data-view="home"><span class="icon">üè†</span><span class="label">Home</span></div>
    <div class="nav-item" data-view="pantry"><span class="icon">üßä</span><span class="label">Pantry</span></div>
    <div class="nav-item" id="nav-scan"><span class="icon">üì∑</span><span class="label">Scan</span></div>
    <div class="nav-item" data-view="grocery"><span class="icon">üõí</span><span class="label">Grocery</span></div>
    <div class="nav-item" data-view="recipes"><span class="icon">üìñ</span><span class="label">Recipes</span></div>
</nav>

<!-- Settings Modal -->
<div class="legal-modal" id="settings-modal">
    <div class="legal-header">
        <button class="legal-back" onclick="closeLegal()">‚Üê</button>
        <span class="legal-title">Settings</span>
    </div>
    <div class="settings-list">
        <div class="settings-section">Account</div>
        <div class="settings-item" onclick="openLegal('api')">
            <span class="icon">üîë</span>
            <div class="info"><div class="label">API Key</div><div class="desc">Configure AI scanning</div></div>
            <span class="arrow">‚Ä∫</span>
        </div>
        <div class="settings-item" onclick="clearAllData()">
            <span class="icon">üóëÔ∏è</span>
            <div class="info"><div class="label">Clear All Data</div><div class="desc">Delete pantry, grocery list & settings</div></div>
            <span class="arrow">‚Ä∫</span>
        </div>
        
        <div class="settings-section">Legal</div>
        <div class="settings-item" onclick="openLegal('privacy')">
            <span class="icon">üîí</span>
            <div class="info"><div class="label">Privacy Policy</div><div class="desc">How we handle your data</div></div>
            <span class="arrow">‚Ä∫</span>
        </div>
        <div class="settings-item" onclick="openLegal('terms')">
            <span class="icon">üìÑ</span>
            <div class="info"><div class="label">Terms of Service</div><div class="desc">Usage terms and conditions</div></div>
            <span class="arrow">‚Ä∫</span>
        </div>
        <div class="settings-item" onclick="openLegal('cookies')">
            <span class="icon">üç™</span>
            <div class="info"><div class="label">Cookie Policy</div><div class="desc">Local storage usage</div></div>
            <span class="arrow">‚Ä∫</span>
        </div>
        
        <div class="settings-section">About</div>
        <div class="settings-item" onclick="openLegal('about')">
            <span class="icon">‚ÑπÔ∏è</span>
            <div class="info"><div class="label">About Best Meal Mate</div><div class="desc">Version & credits</div></div>
            <span class="arrow">‚Ä∫</span>
        </div>
        <div class="settings-item" onclick="window.open('mailto:bestmealmate@gmail.com')">
            <span class="icon">üìß</span>
            <div class="info"><div class="label">Contact Us</div><div class="desc"><a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="c4a6a1b7b0a9a1a5a8a9a5b0a184a3a9a5ada8eaa7aba9">[email&#160;protected]</a></div></div>
            <span class="arrow">‚Ä∫</span>
        </div>
    </div>
    <div class="version-info">Best Meal Mate v2.0.0</div>
</div>

<!-- Privacy Policy Modal -->
<div class="legal-modal" id="privacy-modal">
    <div class="legal-header">
        <button class="legal-back" onclick="closeLegal()">‚Üê</button>
        <span class="legal-title">Privacy Policy</span>
    </div>
    <div class="legal-content">
        <p><strong>Last Updated:</strong> December 2024</p>
        
        <h2>1. Introduction</h2>
        <p>Best Meal Mate ("we", "our", or "us") is committed to protecting your privacy. This Privacy Policy explains how we collect, use, and safeguard your information when you use our mobile application.</p>
        
        <h2>2. Information We Collect</h2>
        <p><strong>Information You Provide:</strong></p>
        <ul>
            <li>Pantry items and ingredient data you add manually or via scanning</li>
            <li>Grocery lists you create</li>
            <li>Recipe preferences and meal plans</li>
            <li>API keys you choose to enter (stored locally only)</li>
        </ul>
        <p><strong>Automatically Collected:</strong></p>
        <ul>
            <li>Camera images (processed in real-time, not stored on our servers)</li>
            <li>Device information for app functionality</li>
        </ul>
        
        <h2>3. How We Use Your Information</h2>
        <ul>
            <li>To provide meal planning and recipe suggestions</li>
            <li>To track your pantry inventory and expiration dates</li>
            <li>To generate grocery lists</li>
            <li>To improve app functionality</li>
        </ul>
        
        <h2>4. Data Storage</h2>
        <p>All your data is stored <strong>locally on your device</strong> using browser localStorage. We do not have servers that store your personal information. Your data stays on your device.</p>
        
        <h2>5. Third-Party Services</h2>
        <p>If you enable AI scanning, images are sent to Anthropic's Claude API for processing. This is governed by <a href="https://www.anthropic.com/privacy" target="_blank">Anthropic's Privacy Policy</a>. You control this by providing your own API key.</p>
        
        <h2>6. Camera Usage</h2>
        <p>We request camera access solely for scanning food items. Images are:</p>
        <ul>
            <li>Processed in real-time</li>
            <li>Sent to AI service only if you enable it</li>
            <li>Never stored on our servers</li>
            <li>Not shared with third parties (except the AI service if enabled)</li>
        </ul>
        
        <h2>7. Your Rights</h2>
        <ul>
            <li><strong>Access:</strong> All your data is visible in the app</li>
            <li><strong>Delete:</strong> Clear all data via Settings</li>
            <li><strong>Portability:</strong> Export grocery lists via Share feature</li>
        </ul>
        
        <h2>8. Children's Privacy</h2>
        <p>Our app is not intended for children under 13. We do not knowingly collect information from children.</p>
        
        <h2>9. Changes to This Policy</h2>
        <p>We may update this policy periodically. Changes will be posted in the app.</p>
        
        <h2>10. Contact Us</h2>
        <p>Questions? Email us at <a href="/cdn-cgi/l/email-protection#c6a4a3b5b2aba3a7aaaba7b2a386a1aba7afaae8a5a9ab"><span class="__cf_email__" data-cfemail="e1838492958c84808d8c809584a1868c80888dcf828e8c">[email&#160;protected]</span></a></p>
    </div>
</div>

<!-- Terms of Service Modal -->
<div class="legal-modal" id="terms-modal">
    <div class="legal-header">
        <button class="legal-back" onclick="closeLegal()">‚Üê</button>
        <span class="legal-title">Terms of Service</span>
    </div>
    <div class="legal-content">
        <p><strong>Last Updated:</strong> December 2024</p>
        
        <h2>1. Acceptance of Terms</h2>
        <p>By accessing or using Best Meal Mate ("the App"), you agree to be bound by these Terms of Service. If you do not agree, please do not use the App.</p>
        
        <h2>2. Description of Service</h2>
        <p>Best Meal Mate is a meal planning application that helps you:</p>
        <ul>
            <li>Track pantry inventory</li>
            <li>Get recipe suggestions based on available ingredients</li>
            <li>Create and manage grocery lists</li>
            <li>Plan meals (coming soon)</li>
            <li>Scan food items using AI (optional feature)</li>
        </ul>
        
        <h2>3. User Responsibilities</h2>
        <ul>
            <li>You are responsible for maintaining the security of your device</li>
            <li>You must not misuse the App or attempt to harm its functionality</li>
            <li>If using AI features, you must provide your own valid API key</li>
            <li>You must comply with all applicable laws</li>
        </ul>
        
        <h2>4. AI Features Disclaimer</h2>
        <p>The AI food scanning feature:</p>
        <ul>
            <li>Is provided "as-is" without guarantees of accuracy</li>
            <li>Should not be solely relied upon for food safety decisions</li>
            <li>May occasionally misidentify items</li>
            <li>Requires your own Anthropic API key and usage</li>
        </ul>
        
        <h2>5. Intellectual Property</h2>
        <p>The App, including its design, features, and content, is owned by Best Meal Mate. You may not copy, modify, or distribute the App without permission.</p>
        
        <h2>6. Disclaimer of Warranties</h2>
        <p>THE APP IS PROVIDED "AS IS" WITHOUT WARRANTIES OF ANY KIND. WE DO NOT GUARANTEE:</p>
        <ul>
            <li>Accuracy of AI food identification</li>
            <li>Accuracy of expiration date estimates</li>
            <li>Nutritional information accuracy</li>
            <li>Uninterrupted or error-free service</li>
        </ul>
        
        <h2>7. Limitation of Liability</h2>
        <p>TO THE MAXIMUM EXTENT PERMITTED BY LAW, WE SHALL NOT BE LIABLE FOR:</p>
        <ul>
            <li>Any food safety issues</li>
            <li>Health issues arising from recipe suggestions</li>
            <li>Loss of data stored locally</li>
            <li>Any indirect, incidental, or consequential damages</li>
        </ul>
        
        <h2>8. Food Safety Notice</h2>
        <p><strong>IMPORTANT:</strong> Always use your own judgment regarding food safety. Expiration dates shown are estimates. When in doubt, discard food items. Consult proper food safety guidelines.</p>
        
        <h2>9. Modifications</h2>
        <p>We reserve the right to modify these terms at any time. Continued use after changes constitutes acceptance.</p>
        
        <h2>10. Termination</h2>
        <p>We may terminate or suspend access to the App at any time, without prior notice.</p>
        
        <h2>11. Governing Law</h2>
        <p>These terms are governed by the laws of the United States.</p>
        
        <h2>12. Contact</h2>
        <p>Questions? Contact us at <a href="/cdn-cgi/l/email-protection#b8daddcbccd5ddd9d4d5d9ccddf8dfd5d9d1d496dbd7d5"><span class="__cf_email__" data-cfemail="c0a2a5b3b4ada5a1acada1b4a580a7ada1a9aceea3afad">[email&#160;protected]</span></a></p>
    </div>
</div>

<!-- Cookie Policy Modal -->
<div class="legal-modal" id="cookies-modal">
    <div class="legal-header">
        <button class="legal-back" onclick="closeLegal()">‚Üê</button>
        <span class="legal-title">Cookie & Storage Policy</span>
    </div>
    <div class="legal-content">
        <p><strong>Last Updated:</strong> December 2024</p>
        
        <h2>1. What We Store</h2>
        <p>Best Meal Mate uses your browser's localStorage to save:</p>
        <ul>
            <li><strong>pantry:</strong> Your pantry items and expiration data</li>
            <li><strong>grocery:</strong> Your grocery list items</li>
            <li><strong>mealmate_api_key:</strong> Your Claude API key (if provided)</li>
            <li><strong>ob_done:</strong> Whether you've completed onboarding</li>
        </ul>
        
        <h2>2. We Do NOT Use</h2>
        <ul>
            <li>Tracking cookies</li>
            <li>Analytics cookies</li>
            <li>Advertising cookies</li>
            <li>Third-party cookies</li>
        </ul>
        
        <h2>3. Why We Use Local Storage</h2>
        <p>Local storage allows the app to:</p>
        <ul>
            <li>Remember your pantry items between sessions</li>
            <li>Save your grocery lists</li>
            <li>Work offline</li>
            <li>Keep your data private (stored only on your device)</li>
        </ul>
        
        <h2>4. How to Clear Storage</h2>
        <p>You can clear all stored data by:</p>
        <ul>
            <li>Going to Settings ‚Üí Clear All Data in the app</li>
            <li>Clearing your browser's site data</li>
            <li>Using your browser's developer tools</li>
        </ul>
        
        <h2>5. Data Persistence</h2>
        <p>Data in localStorage persists until:</p>
        <ul>
            <li>You manually clear it</li>
            <li>You clear browser data</li>
            <li>You uninstall the app/clear site data</li>
        </ul>
        
        <h2>6. Contact</h2>
        <p>Questions? Email <a href="/cdn-cgi/l/email-protection#d5b7b0a6a1b8b0b4b9b8b4a1b095b2b8b4bcb9fbb6bab8"><span class="__cf_email__" data-cfemail="4a282f393e272f2b26272b3e2f0a2d272b232664292527">[email&#160;protected]</span></a></p>
    </div>
</div>

<!-- About Modal -->
<div class="legal-modal" id="about-modal">
    <div class="legal-header">
        <button class="legal-back" onclick="closeLegal()">‚Üê</button>
        <span class="legal-title">About</span>
    </div>
    <div class="legal-content" style="text-align:center">
        <div style="font-size:80px;margin:40px 0">üç≥</div>
        <h2 style="font-family:'Instrument Serif',serif;font-size:32px;margin-bottom:8px">Best Meal Mate</h2>
        <p style="color:var(--green);margin-bottom:24px">Version 2.0.0</p>
        
        <p style="margin-bottom:24px">AI-powered meal planning made simple. Scan your fridge, get recipe ideas, reduce food waste.</p>
        
        <h2>Features</h2>
        <ul style="text-align:left">
            <li>üì∑ AI Food Scanner</li>
            <li>üßä Pantry Tracking</li>
            <li>üìñ Smart Recipe Suggestions</li>
            <li>üõí Grocery Lists</li>
            <li>üìÖ Meal Planning (Coming Soon)</li>
            <li>‚è∞ Expiration Alerts</li>
        </ul>
        
        <h2>Credits</h2>
        <p>Built with ‚ù§Ô∏è by Best Meal Mate Team</p>
        <p>AI powered by <a href="https://anthropic.com" target="_blank">Anthropic Claude</a></p>
        
        <h2>Open Source</h2>
        <p>Fonts: DM Sans, Instrument Serif (Google Fonts)</p>
        
        <div style="margin-top:40px;padding-top:20px;border-top:1px solid var(--border)">
            <p>¬© 2024 Best Meal Mate. All rights reserved.</p>
        </div>
    </div>
</div>

<!-- API Key Settings Modal -->
<div class="legal-modal" id="api-modal">
    <div class="legal-header">
        <button class="legal-back" onclick="closeLegal()">‚Üê</button>
        <span class="legal-title">API Key Settings</span>
    </div>
    <div class="legal-content">
        <h2>Claude API Key</h2>
        <p>To enable real AI food scanning, you need a Claude API key from Anthropic.</p>
        
        <div style="margin:20px 0">
            <input type="password" id="api-key-input-settings" placeholder="sk-ant-api03-..." style="width:100%;background:var(--card);border:1px solid var(--border);border-radius:8px;padding:12px;color:var(--text);font-size:14px;margin-bottom:12px">
            <button onclick="saveKeyFromSettings()" style="width:100%;background:var(--green);border:none;border-radius:8px;padding:14px;color:#fff;font-size:15px;font-weight:600;cursor:pointer">Save API Key</button>
        </div>
        
        <div id="api-status" style="padding:16px;background:var(--card);border-radius:8px;margin-bottom:20px">
            <p id="api-status-text">No API key configured</p>
        </div>
        
        <h2>How to Get an API Key</h2>
        <ol>
            <li>Go to <a href="https://console.anthropic.com" target="_blank">console.anthropic.com</a></li>
            <li>Sign up or log in</li>
            <li>Navigate to API Keys</li>
            <li>Create a new key</li>
            <li>Copy and paste it above</li>
        </ol>
        
        <h2>Security Note</h2>
        <p>Your API key is stored <strong>locally on your device only</strong>. It is never sent to our servers. It is only used to communicate directly with Anthropic's API.</p>
        
        <h2>Without API Key</h2>
        <p>The app still works! You'll see demo results when scanning. Real AI recognition requires a valid API key.</p>
        
        <div style="margin-top:20px">
            <button onclick="removeApiKey()" style="width:100%;background:var(--red);border:none;border-radius:8px;padding:14px;color:#fff;font-size:15px;font-weight:600;cursor:pointer">Remove API Key</button>
        </div>
    </div>
</div>

<!-- Scanner Modal -->
<div class="modal" id="scanner-modal">
    <div class="modal-header"><button class="modal-close" id="close-scanner">‚úï</button><div></div><div style="width:44px"></div></div>
    <div class="video-box">
        <video id="camera-video" autoplay playsinline muted></video>
        <div class="scan-overlay" id="scan-overlay" style="display:none"><div class="scan-frame"><div class="scan-corners"></div><div class="scan-line"></div></div></div>
        <div class="scan-state" id="permission-state"><div class="icon">üì∑</div><h3>Camera Access</h3><p>Best Meal Mate needs camera access to scan your ingredients.</p><button id="request-camera">Enable Camera</button></div>
        <div class="scan-state hidden" id="error-state"><div class="icon">‚ö†Ô∏è</div><h3>Camera Unavailable</h3><p id="error-message">Unable to access camera.</p><button id="retry-camera">Try Again</button></div>
        <p class="scan-hint" id="scan-hint" style="display:none">Point at food items to scan</p>
    </div>
    <div class="scan-controls" id="scan-controls" style="display:none">
        <button class="capture-btn" id="capture-btn"><div class="capture-btn-inner">üì∏</div></button>
        <div class="scan-actions">
            <button class="scan-action" id="flip-camera"><div class="icon">üîÑ</div><span class="label">Flip</span></button>
            <button class="scan-action" id="gallery-btn"><div class="icon">üñºÔ∏è</div><span class="label">Gallery</span></button>
            <button class="scan-action" id="flash-btn"><div class="icon">‚ö°</div><span class="label">Flash</span></button>
        </div>
    </div>
</div>
<div class="results-bg" id="results-bg"></div>
<div class="results-modal" id="results-modal">
    <div class="results-handle"></div>
    <div class="results-header"><h3>Detected Items</h3><button id="results-close">‚úï</button></div>
    <div class="results-preview"><img id="captured-image" src="" alt=""></div>
    <div id="results-content"><div class="analyzing" id="analyzing"><div class="spinner"></div><p>Analyzing your ingredients...</p></div><div class="detected-items" id="detected-items" style="display:none"></div></div>
    <div class="results-actions" id="results-actions" style="display:none"><button class="results-btn secondary" id="scan-more">Scan More</button><button class="results-btn primary" id="add-to-pantry">Add to Pantry</button></div>
</div>
<div class="recipe-modal" id="recipe-modal">
    <div class="recipe-modal-header"><button class="recipe-modal-close" id="recipe-modal-close">‚úï</button><div></div></div>
    <div class="recipe-modal-content" id="recipe-modal-content"></div>
    <div class="recipe-modal-actions"><button class="recipe-modal-btn secondary" id="recipe-add-missing">üõí Add Missing</button><button class="recipe-modal-btn primary" id="recipe-start">üë©‚Äçüç≥ Start Cooking</button></div>
</div>
<div class="onboarding" id="onboarding">
    <div class="icon" id="ob-icon">üì∑</div>
    <h2 id="ob-title">Scan Your Fridge</h2>
    <p id="ob-text">Point your camera at your fridge and let AI identify all your ingredients instantly.</p>
    <div class="onboarding-dots"><div class="onboarding-dot active" data-s="0"></div><div class="onboarding-dot" data-s="1"></div><div class="onboarding-dot" data-s="2"></div></div>
    <button class="onboarding-btn" id="ob-next">Next</button>
    <button class="onboarding-skip" id="ob-skip">Skip</button>
</div>
<input type="file" id="gallery-input" accept="image/*" style="display:none">
<canvas id="capture-canvas" style="display:none"></canvas>
<div class="toast" id="toast"><span id="toast-icon">‚úì</span><span id="toast-message"></span></div>
<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
let API_KEY=localStorage.getItem('mealmate_api_key')||'';
const state={view:'home',stream:null,active:false,facing:'environment',detected:[],pantry:JSON.parse(localStorage.getItem('pantry')||'[]'),grocery:JSON.parse(localStorage.getItem('grocery')||'[]'),obStep:0};
const recipes=[
// BREAKFAST (1-12)
{id:1,name:'Classic Omelette',emoji:'üç≥',time:10,cal:280,tags:['breakfast','quick','healthy'],ings:[{n:'Eggs',e:'ü•ö',a:'3'},{n:'Butter',e:'üßà',a:'1 tbsp'},{n:'Cheese',e:'üßÄ',a:'¬º cup'}],steps:['Whisk eggs in bowl.','Heat butter in pan.','Pour eggs, let set 30 sec.','Push edges, tilt pan.','Add cheese, fold in half.']},
{id:2,name:'Avocado Toast',emoji:'ü•ë',time:5,cal:320,tags:['breakfast','quick','healthy'],ings:[{n:'Bread',e:'üçû',a:'2 slices'},{n:'Avocado',e:'ü•ë',a:'1'},{n:'Eggs',e:'ü•ö',a:'1'}],steps:['Toast bread.','Mash avocado with salt.','Spread on toast.','Top with fried egg.']},
{id:3,name:'Banana Pancakes',emoji:'ü•û',time:20,cal:380,tags:['breakfast','comfort'],ings:[{n:'Banana',e:'üçå',a:'2'},{n:'Eggs',e:'ü•ö',a:'2'},{n:'Milk',e:'ü•õ',a:'¬Ω cup'},{n:'Flour',e:'üåæ',a:'1 cup'}],steps:['Mash bananas.','Add eggs, milk, flour.','Cook in buttered pan.','Flip when bubbles form.']},
{id:4,name:'Smoothie Bowl',emoji:'ü´ê',time:5,cal:280,tags:['breakfast','quick','healthy','vegan'],ings:[{n:'Banana',e:'üçå',a:'1 frozen'},{n:'Berries',e:'ü´ê',a:'1 cup'},{n:'Yogurt',e:'ü•õ',a:'¬Ω cup'}],steps:['Blend all until thick.','Pour into bowl.','Top with granola and fruit.']},
{id:5,name:'French Toast',emoji:'üçû',time:15,cal:420,tags:['breakfast','comfort'],ings:[{n:'Bread',e:'üçû',a:'4 slices'},{n:'Eggs',e:'ü•ö',a:'2'},{n:'Milk',e:'ü•õ',a:'¬º cup'},{n:'Butter',e:'üßà',a:'2 tbsp'}],steps:['Whisk eggs with milk.','Dip bread in mixture.','Cook in butter until golden.','Serve with syrup.']},
{id:6,name:'Eggs Benedict',emoji:'ü•ö',time:25,cal:520,tags:['breakfast'],ings:[{n:'Eggs',e:'ü•ö',a:'2'},{n:'Bread',e:'üçû',a:'2 muffins'},{n:'Bacon',e:'ü•ì',a:'4 slices'},{n:'Butter',e:'üßà',a:'3 tbsp'}],steps:['Poach eggs in simmering water.','Toast muffins, cook bacon.','Make hollandaise with butter.','Stack and serve.']},
{id:7,name:'Breakfast Burrito',emoji:'üåØ',time:15,cal:480,tags:['breakfast','quick'],ings:[{n:'Eggs',e:'ü•ö',a:'3'},{n:'Cheese',e:'üßÄ',a:'¬Ω cup'},{n:'Bacon',e:'ü•ì',a:'3 slices'},{n:'Tortilla',e:'ü´ì',a:'1 large'}],steps:['Scramble eggs.','Cook bacon, chop.','Warm tortilla.','Fill and wrap.']},
{id:8,name:'Overnight Oats',emoji:'ü•£',time:5,cal:320,tags:['breakfast','quick','healthy'],ings:[{n:'Oats',e:'üåæ',a:'¬Ω cup'},{n:'Milk',e:'ü•õ',a:'¬Ω cup'},{n:'Yogurt',e:'ü•õ',a:'¬º cup'},{n:'Berries',e:'ü´ê',a:'¬Ω cup'}],steps:['Mix oats, milk, yogurt.','Add berries.','Refrigerate overnight.','Enjoy cold.']},
{id:9,name:'Veggie Scramble',emoji:'ü•¨',time:12,cal:260,tags:['breakfast','healthy','vegetarian'],ings:[{n:'Eggs',e:'ü•ö',a:'3'},{n:'Spinach',e:'ü•¨',a:'1 cup'},{n:'Tomatoes',e:'üçÖ',a:'1'},{n:'Cheese',e:'üßÄ',a:'¬º cup'}],steps:['Saut√© spinach and tomatoes.','Add beaten eggs.','Scramble until set.','Top with cheese.']},
{id:10,name:'A√ßa√≠ Bowl',emoji:'üçá',time:10,cal:340,tags:['breakfast','healthy','vegan'],ings:[{n:'Banana',e:'üçå',a:'1 frozen'},{n:'Berries',e:'ü´ê',a:'1 cup'},{n:'Milk',e:'ü•õ',a:'¬Ω cup'}],steps:['Blend frozen fruit with milk.','Pour thick into bowl.','Top with granola, fruit, honey.']},
{id:11,name:'Bagel & Lox',emoji:'ü•Ø',time:5,cal:380,tags:['breakfast','quick'],ings:[{n:'Bread',e:'ü•Ø',a:'1 bagel'},{n:'Salmon',e:'üêü',a:'3 oz'},{n:'Cream Cheese',e:'üßÄ',a:'2 tbsp'}],steps:['Toast bagel.','Spread cream cheese.','Top with smoked salmon.','Add capers if desired.']},
{id:12,name:'Shakshuka',emoji:'üç≥',time:25,cal:320,tags:['breakfast','healthy'],ings:[{n:'Eggs',e:'ü•ö',a:'4'},{n:'Tomatoes',e:'üçÖ',a:'4'},{n:'Onion',e:'üßÖ',a:'1'},{n:'Garlic',e:'üßÑ',a:'3 cloves'}],steps:['Saut√© onion and garlic.','Add crushed tomatoes, simmer.','Make wells, crack in eggs.','Cover and cook until set.']},
// LUNCH (13-24)
{id:13,name:'Grilled Cheese',emoji:'üßÄ',time:10,cal:450,tags:['lunch','quick','comfort'],ings:[{n:'Bread',e:'üçû',a:'2 slices'},{n:'Cheese',e:'üßÄ',a:'2 slices'},{n:'Butter',e:'üßà',a:'2 tbsp'}],steps:['Butter bread.','Heat pan, add bread butter-down.','Add cheese, top with bread.','Flip when golden.']},
{id:14,name:'Caesar Salad',emoji:'ü•ó',time:15,cal:320,tags:['lunch','healthy'],ings:[{n:'Lettuce',e:'ü•¨',a:'1 head'},{n:'Chicken',e:'üçó',a:'1 breast'},{n:'Cheese',e:'üßÄ',a:'¬º cup'},{n:'Bread',e:'üçû',a:'1 slice'}],steps:['Grill chicken, slice.','Make croutons from bread.','Toss lettuce with dressing.','Top with chicken, cheese, croutons.']},
{id:15,name:'BLT Sandwich',emoji:'ü•™',time:10,cal:420,tags:['lunch','quick'],ings:[{n:'Bread',e:'üçû',a:'2 slices'},{n:'Bacon',e:'ü•ì',a:'4 slices'},{n:'Lettuce',e:'ü•¨',a:'2 leaves'},{n:'Tomatoes',e:'üçÖ',a:'2 slices'}],steps:['Cook bacon until crispy.','Toast bread.','Layer lettuce, tomato, bacon.','Add mayo, close sandwich.']},
{id:16,name:'Chicken Wrap',emoji:'üåØ',time:12,cal:380,tags:['lunch','quick','healthy'],ings:[{n:'Chicken',e:'üçó',a:'1 breast'},{n:'Tortilla',e:'ü´ì',a:'1 large'},{n:'Lettuce',e:'ü•¨',a:'1 cup'},{n:'Cheese',e:'üßÄ',a:'¬º cup'}],steps:['Slice grilled chicken.','Warm tortilla.','Add chicken, lettuce, cheese.','Wrap tightly.']},
{id:17,name:'Tuna Salad',emoji:'üêü',time:10,cal:290,tags:['lunch','quick','healthy'],ings:[{n:'Tuna',e:'üêü',a:'1 can'},{n:'Celery',e:'ü•¨',a:'2 stalks'},{n:'Onion',e:'üßÖ',a:'¬º'},{n:'Mayo',e:'ü´ô',a:'2 tbsp'}],steps:['Drain tuna.','Dice celery and onion.','Mix all with mayo.','Serve on bread or greens.']},
{id:18,name:'Caprese Salad',emoji:'üçÖ',time:5,cal:280,tags:['lunch','quick','healthy','vegetarian'],ings:[{n:'Tomatoes',e:'üçÖ',a:'2 large'},{n:'Cheese',e:'üßÄ',a:'8 oz mozzarella'},{n:'Basil',e:'üåø',a:'handful'}],steps:['Slice tomatoes and mozzarella.','Arrange alternating on plate.','Top with basil.','Drizzle olive oil, balsamic.']},
{id:19,name:'Quesadilla',emoji:'üßÄ',time:10,cal:440,tags:['lunch','quick','comfort'],ings:[{n:'Tortilla',e:'ü´ì',a:'2'},{n:'Cheese',e:'üßÄ',a:'1 cup'},{n:'Chicken',e:'üçó',a:'¬Ω cup'}],steps:['Place tortilla in pan.','Add cheese and chicken.','Top with second tortilla.','Flip when golden, slice.']},
{id:20,name:'Greek Salad',emoji:'ü•ó',time:10,cal:260,tags:['lunch','healthy','vegetarian'],ings:[{n:'Cucumber',e:'ü•í',a:'1'},{n:'Tomatoes',e:'üçÖ',a:'2'},{n:'Onion',e:'üßÖ',a:'¬º'},{n:'Cheese',e:'üßÄ',a:'4 oz feta'}],steps:['Chop cucumber, tomatoes, onion.','Add olives and feta.','Dress with olive oil, oregano.','Toss and serve.']},
{id:21,name:'Egg Salad Sandwich',emoji:'ü•™',time:15,cal:380,tags:['lunch','quick'],ings:[{n:'Eggs',e:'ü•ö',a:'4'},{n:'Mayo',e:'ü´ô',a:'3 tbsp'},{n:'Bread',e:'üçû',a:'4 slices'},{n:'Lettuce',e:'ü•¨',a:'2 leaves'}],steps:['Boil eggs, cool, peel.','Mash with mayo, salt, pepper.','Spread on bread.','Add lettuce, close.']},
{id:22,name:'Tomato Soup',emoji:'üçÖ',time:25,cal:180,tags:['lunch','healthy','vegetarian','vegan'],ings:[{n:'Tomatoes',e:'üçÖ',a:'6'},{n:'Onion',e:'üßÖ',a:'1'},{n:'Garlic',e:'üßÑ',a:'3 cloves'}],steps:['Saut√© onion and garlic.','Add tomatoes, simmer 15 min.','Blend until smooth.','Season and serve.']},
{id:23,name:'Club Sandwich',emoji:'ü•™',time:15,cal:520,tags:['lunch'],ings:[{n:'Bread',e:'üçû',a:'3 slices'},{n:'Chicken',e:'üçó',a:'4 oz'},{n:'Bacon',e:'ü•ì',a:'4 slices'},{n:'Lettuce',e:'ü•¨',a:'2 leaves'}],steps:['Toast bread.','Cook bacon.','Layer chicken, bacon, lettuce, tomato.','Stack triple-decker style.']},
{id:24,name:'Hummus Veggie Wrap',emoji:'üåØ',time:8,cal:320,tags:['lunch','quick','healthy','vegetarian','vegan'],ings:[{n:'Tortilla',e:'ü´ì',a:'1'},{n:'Hummus',e:'ü´ò',a:'¬º cup'},{n:'Cucumber',e:'ü•í',a:'¬Ω'},{n:'Carrots',e:'ü•ï',a:'1'}],steps:['Spread hummus on tortilla.','Add sliced veggies.','Roll tightly.','Slice in half.']},
// DINNER (25-42)
{id:25,name:'Chicken Stir Fry',emoji:'üçó',time:25,cal:420,tags:['dinner','healthy'],ings:[{n:'Chicken',e:'üçó',a:'2 breasts'},{n:'Vegetables',e:'ü•¨',a:'2 cups'},{n:'Soy Sauce',e:'ü´ô',a:'3 tbsp'},{n:'Garlic',e:'üßÑ',a:'3 cloves'}],steps:['Cut chicken into pieces.','Stir fry chicken 5 min.','Add vegetables and garlic.','Add soy sauce, toss.']},
{id:26,name:'Pasta Carbonara',emoji:'üçù',time:20,cal:580,tags:['dinner','comfort'],ings:[{n:'Pasta',e:'üçù',a:'8 oz'},{n:'Eggs',e:'ü•ö',a:'2'},{n:'Cheese',e:'üßÄ',a:'¬Ω cup'},{n:'Bacon',e:'ü•ì',a:'4 slices'}],steps:['Cook pasta.','Fry bacon until crispy.','Whisk eggs with cheese.','Toss hot pasta with egg mixture off heat.']},
{id:27,name:'Beef Tacos',emoji:'üåÆ',time:20,cal:450,tags:['dinner','quick'],ings:[{n:'Ground Beef',e:'ü•©',a:'1 lb'},{n:'Tortilla',e:'ü´ì',a:'8 small'},{n:'Cheese',e:'üßÄ',a:'1 cup'},{n:'Lettuce',e:'ü•¨',a:'2 cups'}],steps:['Brown beef with taco seasoning.','Warm tortillas.','Fill with beef.','Top with cheese, lettuce, salsa.']},
{id:28,name:'Salmon & Veggies',emoji:'üêü',time:25,cal:380,tags:['dinner','healthy'],ings:[{n:'Salmon',e:'üêü',a:'2 fillets'},{n:'Broccoli',e:'ü•¶',a:'2 cups'},{n:'Lemon',e:'üçã',a:'1'}],steps:['Season salmon with lemon.','Roast at 400¬∞F with broccoli.','Cook 15-18 minutes.','Serve with lemon wedges.']},
{id:29,name:'Spaghetti Bolognese',emoji:'üçù',time:40,cal:520,tags:['dinner','comfort'],ings:[{n:'Pasta',e:'üçù',a:'12 oz'},{n:'Ground Beef',e:'ü•©',a:'1 lb'},{n:'Tomatoes',e:'üçÖ',a:'1 can'},{n:'Onion',e:'üßÖ',a:'1'}],steps:['Saut√© onion, add beef.','Add tomatoes, simmer 25 min.','Cook pasta.','Serve sauce over pasta.']},
{id:30,name:'Chicken Parmesan',emoji:'üçó',time:35,cal:550,tags:['dinner','comfort'],ings:[{n:'Chicken',e:'üçó',a:'2 breasts'},{n:'Cheese',e:'üßÄ',a:'1 cup mozzarella'},{n:'Tomatoes',e:'üçÖ',a:'1 cup sauce'},{n:'Bread',e:'üçû',a:'1 cup crumbs'}],steps:['Bread chicken, pan fry.','Top with sauce and cheese.','Bake until cheese melts.','Serve with pasta.']},
{id:31,name:'Shrimp Scampi',emoji:'ü¶ê',time:20,cal:380,tags:['dinner','quick'],ings:[{n:'Shrimp',e:'ü¶ê',a:'1 lb'},{n:'Pasta',e:'üçù',a:'8 oz'},{n:'Garlic',e:'üßÑ',a:'6 cloves'},{n:'Butter',e:'üßà',a:'4 tbsp'}],steps:['Cook pasta.','Saut√© garlic in butter.','Add shrimp, cook 3 min.','Toss with pasta and lemon.']},
{id:32,name:'Beef Stir Fry',emoji:'ü•©',time:20,cal:440,tags:['dinner','quick','healthy'],ings:[{n:'Beef',e:'ü•©',a:'1 lb'},{n:'Broccoli',e:'ü•¶',a:'2 cups'},{n:'Soy Sauce',e:'ü´ô',a:'3 tbsp'},{n:'Garlic',e:'üßÑ',a:'3 cloves'}],steps:['Slice beef thin.','Stir fry beef 2 min, set aside.','Cook broccoli and garlic.','Add beef back, toss with sauce.']},
{id:33,name:'Baked Chicken',emoji:'üçó',time:45,cal:320,tags:['dinner','healthy'],ings:[{n:'Chicken',e:'üçó',a:'4 thighs'},{n:'Garlic',e:'üßÑ',a:'4 cloves'},{n:'Lemon',e:'üçã',a:'1'}],steps:['Season chicken.','Place in baking dish with garlic.','Squeeze lemon over top.','Bake 400¬∞F for 35-40 min.']},
{id:34,name:'Fish Tacos',emoji:'üåÆ',time:20,cal:380,tags:['dinner','healthy'],ings:[{n:'Fish',e:'üêü',a:'1 lb white fish'},{n:'Tortilla',e:'ü´ì',a:'8 small'},{n:'Cabbage',e:'ü•¨',a:'2 cups'},{n:'Lime',e:'üçã',a:'2'}],steps:['Season and grill fish.','Shred cabbage, dress with lime.','Warm tortillas.','Assemble tacos with slaw.']},
{id:35,name:'Fried Rice',emoji:'üçö',time:20,cal:420,tags:['dinner','quick'],ings:[{n:'Rice',e:'üçö',a:'3 cups cooked'},{n:'Eggs',e:'ü•ö',a:'2'},{n:'Vegetables',e:'ü•¨',a:'1 cup'},{n:'Soy Sauce',e:'ü´ô',a:'2 tbsp'}],steps:['Scramble eggs, set aside.','Stir fry vegetables.','Add cold rice, fry 3 min.','Add eggs and soy sauce.']},
{id:36,name:'Stuffed Peppers',emoji:'ü´ë',time:45,cal:380,tags:['dinner','healthy'],ings:[{n:'Bell Peppers',e:'ü´ë',a:'4'},{n:'Ground Beef',e:'ü•©',a:'1 lb'},{n:'Rice',e:'üçö',a:'1 cup'},{n:'Tomatoes',e:'üçÖ',a:'1 can'}],steps:['Cut tops off peppers.','Mix beef, rice, tomatoes.','Stuff peppers.','Bake 375¬∞F for 35 min.']},
{id:37,name:'Chicken Alfredo',emoji:'üçù',time:25,cal:620,tags:['dinner','comfort'],ings:[{n:'Pasta',e:'üçù',a:'12 oz'},{n:'Chicken',e:'üçó',a:'2 breasts'},{n:'Cream',e:'ü•õ',a:'1 cup'},{n:'Cheese',e:'üßÄ',a:'1 cup parmesan'}],steps:['Cook pasta and chicken.','Simmer cream with cheese.','Slice chicken.','Toss pasta with sauce and chicken.']},
{id:38,name:'Pork Chops',emoji:'üçñ',time:25,cal:420,tags:['dinner'],ings:[{n:'Pork Chops',e:'üçñ',a:'4'},{n:'Garlic',e:'üßÑ',a:'3 cloves'},{n:'Butter',e:'üßà',a:'2 tbsp'}],steps:['Season pork chops.','Sear in hot pan 4 min per side.','Add garlic and butter.','Baste and rest before serving.']},
{id:39,name:'Vegetable Curry',emoji:'üçõ',time:30,cal:340,tags:['dinner','healthy','vegetarian','vegan'],ings:[{n:'Potatoes',e:'ü•î',a:'2'},{n:'Carrots',e:'ü•ï',a:'2'},{n:'Coconut Milk',e:'ü•õ',a:'1 can'},{n:'Curry Powder',e:'ü´ô',a:'2 tbsp'}],steps:['Dice potatoes and carrots.','Saut√© with curry powder.','Add coconut milk.','Simmer until tender.']},
{id:40,name:'Burgers',emoji:'üçî',time:20,cal:550,tags:['dinner','comfort'],ings:[{n:'Ground Beef',e:'ü•©',a:'1 lb'},{n:'Bread',e:'üçû',a:'4 buns'},{n:'Cheese',e:'üßÄ',a:'4 slices'},{n:'Lettuce',e:'ü•¨',a:'4 leaves'}],steps:['Form 4 patties, season.','Grill 4 min per side.','Add cheese last minute.','Serve on buns with toppings.']},
{id:41,name:'Pasta Primavera',emoji:'üçù',time:25,cal:380,tags:['dinner','healthy','vegetarian'],ings:[{n:'Pasta',e:'üçù',a:'12 oz'},{n:'Zucchini',e:'ü•í',a:'1'},{n:'Bell Peppers',e:'ü´ë',a:'2'},{n:'Tomatoes',e:'üçÖ',a:'2'}],steps:['Cook pasta.','Saut√© all vegetables.','Toss with pasta.','Add olive oil and parmesan.']},
{id:42,name:'Meatballs',emoji:'üçñ',time:35,cal:480,tags:['dinner','comfort'],ings:[{n:'Ground Beef',e:'ü•©',a:'1 lb'},{n:'Bread',e:'üçû',a:'¬Ω cup crumbs'},{n:'Eggs',e:'ü•ö',a:'1'},{n:'Tomatoes',e:'üçÖ',a:'2 cups sauce'}],steps:['Mix beef, crumbs, egg.','Form balls, brown in pan.','Add tomato sauce.','Simmer 20 minutes.']},
// QUICK MEALS (43-50)
{id:43,name:'Ramen Upgrade',emoji:'üçú',time:15,cal:420,tags:['dinner','quick'],ings:[{n:'Ramen',e:'üçú',a:'1 pack'},{n:'Eggs',e:'ü•ö',a:'1'},{n:'Vegetables',e:'ü•¨',a:'1 cup'},{n:'Soy Sauce',e:'ü´ô',a:'1 tbsp'}],steps:['Cook ramen.','Soft boil egg.','Saut√© vegetables.','Top ramen with egg, veggies.']},
{id:44,name:'Caprese Chicken',emoji:'üçó',time:20,cal:380,tags:['dinner','quick','healthy'],ings:[{n:'Chicken',e:'üçó',a:'2 breasts'},{n:'Tomatoes',e:'üçÖ',a:'2'},{n:'Cheese',e:'üßÄ',a:'4 oz mozzarella'},{n:'Basil',e:'üåø',a:'handful'}],steps:['Season and cook chicken.','Top with tomato and mozzarella.','Broil until cheese melts.','Garnish with basil.']},
{id:45,name:'One-Pan Fajitas',emoji:'ü´ë',time:20,cal:360,tags:['dinner','quick','healthy'],ings:[{n:'Chicken',e:'üçó',a:'1 lb'},{n:'Bell Peppers',e:'ü´ë',a:'3'},{n:'Onion',e:'üßÖ',a:'1'},{n:'Tortilla',e:'ü´ì',a:'8'}],steps:['Slice chicken and veggies.','Cook chicken first, then veggies.','Season with fajita spices.','Serve in warm tortillas.']},
{id:46,name:'Garlic Butter Shrimp',emoji:'ü¶ê',time:12,cal:280,tags:['dinner','quick','healthy'],ings:[{n:'Shrimp',e:'ü¶ê',a:'1 lb'},{n:'Garlic',e:'üßÑ',a:'6 cloves'},{n:'Butter',e:'üßà',a:'4 tbsp'},{n:'Lemon',e:'üçã',a:'1'}],steps:['Melt butter, add garlic.','Add shrimp, cook 2 min per side.','Squeeze lemon over top.','Serve immediately.']},
{id:47,name:'Black Bean Tacos',emoji:'üåÆ',time:15,cal:320,tags:['dinner','quick','vegetarian','vegan'],ings:[{n:'Black Beans',e:'ü´ò',a:'1 can'},{n:'Tortilla',e:'ü´ì',a:'8'},{n:'Avocado',e:'ü•ë',a:'1'},{n:'Lime',e:'üçã',a:'1'}],steps:['Heat beans with cumin.','Warm tortillas.','Fill with beans and avocado.','Squeeze lime on top.']},
{id:48,name:'Cheesy Baked Potato',emoji:'ü•î',time:60,cal:450,tags:['dinner','comfort','vegetarian'],ings:[{n:'Potatoes',e:'ü•î',a:'4 large'},{n:'Cheese',e:'üßÄ',a:'1 cup'},{n:'Butter',e:'üßà',a:'4 tbsp'},{n:'Bacon',e:'ü•ì',a:'4 slices'}],steps:['Bake potatoes at 400¬∞F for 50 min.','Split open.','Add butter and cheese.','Top with bacon bits.']},
{id:49,name:'Teriyaki Chicken Bowl',emoji:'üçö',time:25,cal:480,tags:['dinner'],ings:[{n:'Chicken',e:'üçó',a:'2 breasts'},{n:'Rice',e:'üçö',a:'2 cups'},{n:'Broccoli',e:'ü•¶',a:'2 cups'},{n:'Soy Sauce',e:'ü´ô',a:'¬º cup'}],steps:['Cook rice.','Grill chicken, slice.','Steam broccoli.','Drizzle all with teriyaki sauce.']},
{id:50,name:'Margherita Pizza',emoji:'üçï',time:20,cal:520,tags:['dinner','comfort','vegetarian'],ings:[{n:'Pizza Dough',e:'üçï',a:'1 lb'},{n:'Tomatoes',e:'üçÖ',a:'¬Ω cup sauce'},{n:'Cheese',e:'üßÄ',a:'8 oz mozzarella'},{n:'Basil',e:'üåø',a:'handful'}],steps:['Stretch dough on pan.','Spread sauce, add cheese.','Bake 450¬∞F for 12-15 min.','Top with fresh basil.']},
{id:51,name:'Peanut Noodles',emoji:'üçú',time:15,cal:440,tags:['dinner','quick','vegetarian'],ings:[{n:'Noodles',e:'üçú',a:'8 oz'},{n:'Peanut Butter',e:'ü•ú',a:'3 tbsp'},{n:'Soy Sauce',e:'ü´ô',a:'2 tbsp'},{n:'Vegetables',e:'ü•¨',a:'1 cup'}],steps:['Cook noodles.','Mix peanut butter and soy sauce.','Toss noodles with sauce.','Top with veggies.']},
{id:52,name:'Sheet Pan Sausage',emoji:'üå≠',time:30,cal:420,tags:['dinner'],ings:[{n:'Sausage',e:'üå≠',a:'4 links'},{n:'Potatoes',e:'ü•î',a:'4'},{n:'Bell Peppers',e:'ü´ë',a:'2'},{n:'Onion',e:'üßÖ',a:'1'}],steps:['Cut potatoes and veggies.','Arrange on sheet pan with sausage.','Drizzle with oil.','Roast 400¬∞F for 25 min.']},
{id:53,name:'Egg Fried Rice',emoji:'üç≥',time:15,cal:380,tags:['dinner','quick'],ings:[{n:'Rice',e:'üçö',a:'3 cups cooked'},{n:'Eggs',e:'ü•ö',a:'3'},{n:'Soy Sauce',e:'ü´ô',a:'2 tbsp'},{n:'Peas',e:'ü´õ',a:'¬Ω cup'}],steps:['Scramble eggs, set aside.','Fry cold rice in hot pan.','Add peas and soy sauce.','Mix in eggs, serve.']},
{id:54,name:'Honey Garlic Chicken',emoji:'üçó',time:25,cal:380,tags:['dinner'],ings:[{n:'Chicken',e:'üçó',a:'4 thighs'},{n:'Garlic',e:'üßÑ',a:'6 cloves'},{n:'Honey',e:'üçØ',a:'¬º cup'},{n:'Soy Sauce',e:'ü´ô',a:'3 tbsp'}],steps:['Mix honey, soy sauce, garlic.','Brown chicken in pan.','Add sauce, simmer 15 min.','Serve over rice.']},
{id:55,name:'Spinach Stuffed Chicken',emoji:'üçó',time:35,cal:340,tags:['dinner','healthy'],ings:[{n:'Chicken',e:'üçó',a:'2 breasts'},{n:'Spinach',e:'ü•¨',a:'2 cups'},{n:'Cheese',e:'üßÄ',a:'¬Ω cup feta'},{n:'Garlic',e:'üßÑ',a:'3 cloves'}],steps:['Saut√© spinach with garlic.','Mix with feta.','Cut pocket in chicken, stuff.','Bake 375¬∞F for 25 min.']}
];
const video=document.getElementById('camera-video'),canvas=document.getElementById('capture-canvas'),ctx=canvas.getContext('2d');
function toast(m,t='success'){const el=document.getElementById('toast');document.getElementById('toast-icon').textContent=t==='success'?'‚úì':'‚ö†Ô∏è';document.getElementById('toast-message').textContent=m;el.className=`toast active ${t}`;setTimeout(()=>el.classList.remove('active'),3000)}
function greeting(){const h=new Date().getHours();return h<12?'Good morning':h<17?'Good afternoon':'Good evening'}
function expText(d){return d<=0?'Exp. today!':d===1?'1 day left':`${d} days`}
function expClass(d){return d<=1?'urgent':d<=3?'soon':'ok'}
function save(){localStorage.setItem('pantry',JSON.stringify(state.pantry));localStorage.setItem('grocery',JSON.stringify(state.grocery))}
function switchView(v){state.view=v;document.querySelectorAll('.view').forEach(e=>e.classList.remove('active'));document.getElementById(`${v}-view`).classList.add('active');document.querySelectorAll('.nav-item').forEach(n=>{n.classList.toggle('active',n.dataset.view===v)});if(v==='pantry')renderPantry();if(v==='recipes')renderRecipes();if(v==='grocery')renderGrocery()}
function updateExpiring(){const sorted=[...state.pantry].sort((a,b)=>a.expiresIn-b.expiresIn).slice(0,6);const c=document.getElementById('expiring-items');if(!sorted.length){c.innerHTML='<div style="color:var(--dim);padding:20px;text-align:center;width:100%">Scan items to track expiration</div>';return}c.innerHTML=sorted.map(i=>`<div class="exp-item"><div class="emoji">${i.emoji}</div><p class="name">${i.name}</p><span class="days ${expClass(i.expiresIn)}">${expText(i.expiresIn)}</span></div>`).join('')}
function getMatched(filter='all'){const pNames=state.pantry.map(i=>i.name.toLowerCase());return recipes.filter(r=>filter==='all'||r.tags?.includes(filter)).map(r=>{const m=r.ings.filter(i=>pNames.some(p=>p.includes(i.n.toLowerCase())||i.n.toLowerCase().includes(p))).length;return{...r,match:Math.round(m/r.ings.length*100),missing:r.ings.length-m}}).sort((a,b)=>b.match-a.match)}
function updateHomeRecipes(){const c=document.getElementById('home-recipes');const m=getMatched().slice(0,3);if(!m.length||!state.pantry.length){c.innerHTML='<div style="text-align:center;padding:30px;color:var(--dim)"><div style="font-size:48px;margin-bottom:12px">üç≥</div><p>Scan items to get recipe suggestions</p></div>';return}c.innerHTML=m.map(r=>`<div class="recipe-card" data-id="${r.id}"><div class="img">${r.emoji}</div><div class="info"><div class="match">${r.match}% match</div><div class="name">${r.name}</div><div class="meta">‚è± ${r.time} min ¬∑ üî• ${r.cal} cal</div>${r.missing>0?`<div class="missing">Missing ${r.missing} item${r.missing>1?'s':''}</div>`:''}</div></div>`).join('');c.querySelectorAll('.recipe-card').forEach(card=>card.addEventListener('click',()=>openRecipe(+card.dataset.id)))}
function updateCounts(){document.getElementById('pantry-count').textContent=state.pantry.length;const gc=state.grocery.filter(i=>!i.checked).length;const gb=document.getElementById('grocery-count');gb.textContent=gc;gb.style.display=gc>0?'block':'none'}
function renderPantry(){const c=document.getElementById('pantry-content');const cats={dairy:{n:'Dairy & Eggs',i:'ü•õ',items:[]},vegetables:{n:'Vegetables',i:'ü•¨',items:[]},fruits:{n:'Fruits',i:'üçé',items:[]},meat:{n:'Meat',i:'üçñ',items:[]},grains:{n:'Grains',i:'üçû',items:[]},other:{n:'Other',i:'üì¶',items:[]}};state.pantry.forEach(i=>(cats[i.category]||cats.other).items.push(i));let h='';for(const[k,cat]of Object.entries(cats)){if(!cat.items.length)continue;h+=`<div class="category"><div class="category-header"><span class="icon">${cat.i}</span><span class="title">${cat.n}</span><span class="count">${cat.items.length}</span></div><div class="pantry-grid">${cat.items.map(i=>`<div class="pantry-item" data-id="${i.id}"><div class="emoji">${i.emoji}</div><div class="name">${i.name}</div><div class="exp">${expText(i.expiresIn)}</div></div>`).join('')}</div></div>`}if(!h)h='<div class="empty"><div class="icon">üßä</div><h3>Pantry Empty</h3><p>Scan items to add them</p><button onclick="openScanner()">üì∑ Scan Items</button></div>';c.innerHTML=h}
function renderRecipes(filter='all'){const c=document.getElementById('recipe-list');const m=getMatched(filter);if(!m.length){c.innerHTML='<div class="empty"><div class="icon">üçΩÔ∏è</div><h3>No Recipes Found</h3><p>Try a different filter</p></div>';return}c.innerHTML=m.map(r=>`<div class="recipe-card" data-id="${r.id}"><div class="img">${r.emoji}</div><div class="info"><div class="match">${r.match}% match</div><div class="name">${r.name}</div><div class="meta">‚è± ${r.time} min ¬∑ üî• ${r.cal} cal</div>${r.missing>0?`<div class="missing">Missing ${r.missing} item${r.missing>1?'s':''}</div>`:''}</div></div>`).join('');c.querySelectorAll('.recipe-card').forEach(card=>card.addEventListener('click',()=>openRecipe(+card.dataset.id)))}
function openRecipe(id){const r=recipes.find(x=>x.id===id);if(!r)return;const pNames=state.pantry.map(i=>i.name.toLowerCase());const ings=r.ings.map(i=>({...i,have:pNames.some(p=>p.includes(i.n.toLowerCase())||i.n.toLowerCase().includes(p))}));const missing=ings.filter(i=>!i.have);document.getElementById('recipe-modal-content').innerHTML=`<div class="recipe-modal-img">${r.emoji}</div><h1 class="recipe-modal-title">${r.name}</h1><div class="recipe-modal-meta"><span>‚è± ${r.time} min</span><span>üî• ${r.cal} cal</span></div><div class="recipe-modal-section"><h4>üìù Ingredients</h4>${ings.map(i=>`<div class="recipe-modal-ing"><div class="check ${i.have?'have':'need'}">${i.have?'‚úì':'+'}</div><span class="text">${i.e} ${i.a} ${i.n}</span>${!i.have?`<span class="add" data-n="${i.n}" data-e="${i.e}">Add</span>`:''}</div>`).join('')}</div><div class="recipe-modal-section"><h4>üë©‚Äçüç≥ Instructions</h4>${r.steps.map((s,i)=>`<div class="recipe-modal-step"><div class="num">${i+1}</div><div class="text">${s}</div></div>`).join('')}</div>`;document.querySelectorAll('.recipe-modal-ing .add').forEach(btn=>btn.addEventListener('click',e=>{e.stopPropagation();addGrocery(btn.dataset.n,btn.dataset.e);btn.textContent='Added ‚úì';btn.style.color='var(--green)'}));document.getElementById('recipe-add-missing').onclick=()=>{missing.forEach(i=>addGrocery(i.n,i.e));toast(`Added ${missing.length} items to grocery list`)};document.getElementById('recipe-modal').classList.add('active')}
function closeRecipe(){document.getElementById('recipe-modal').classList.remove('active')}
function renderGrocery(){const c=document.getElementById('grocery-list');const s=document.getElementById('grocery-status');s.textContent=`${state.grocery.filter(i=>!i.checked).length} of ${state.grocery.length} items`;if(!state.grocery.length){c.innerHTML='<div class="empty"><div class="icon">üõí</div><h3>List Empty</h3><p>Add items manually or from recipes</p></div>';return}c.innerHTML=state.grocery.map(i=>`<div class="grocery-item ${i.checked?'checked':''}" data-id="${i.id}"><div class="grocery-check ${i.checked?'checked':''}" data-id="${i.id}">${i.checked?'‚úì':''}</div><span class="emoji">${i.emoji}</span><div class="info"><div class="name">${i.name}</div></div><span class="delete" data-id="${i.id}">√ó</span></div>`).join('');c.querySelectorAll('.grocery-check').forEach(ch=>ch.addEventListener('click',()=>toggleGrocery(+ch.dataset.id)));c.querySelectorAll('.delete').forEach(d=>d.addEventListener('click',()=>deleteGrocery(+d.dataset.id)))}
function addGrocery(n,e='üõí'){if(state.grocery.some(i=>i.name.toLowerCase()===n.toLowerCase()))return;state.grocery.push({id:Date.now(),name:n,emoji:e,checked:false});save();updateCounts();if(state.view==='grocery')renderGrocery()}
function toggleGrocery(id){const i=state.grocery.find(x=>x.id===id);if(i){i.checked=!i.checked;save();updateCounts();renderGrocery()}}
function deleteGrocery(id){state.grocery=state.grocery.filter(i=>i.id!==id);save();updateCounts();renderGrocery()}
function clearGrocery(){if(confirm('Clear all?')){state.grocery=[];save();updateCounts();renderGrocery();toast('List cleared')}}
function shareGrocery(){const t=state.grocery.map(i=>`${i.checked?'‚úì':'‚óã'} ${i.emoji} ${i.name}`).join('\n');if(navigator.share)navigator.share({title:'Grocery List',text:`üõí Best Meal Mate:\n\n${t}`});else{navigator.clipboard.writeText(t);toast('Copied to clipboard')}}
function openScanner(){document.getElementById('scanner-modal').classList.add('active');document.getElementById('permission-state').classList.remove('hidden');document.getElementById('error-state').classList.add('hidden');document.getElementById('scan-overlay').style.display='none';document.getElementById('scan-controls').style.display='none';document.getElementById('scan-hint').style.display='none';requestCamera()}
function closeScanner(){document.getElementById('scanner-modal').classList.remove('active');stopCamera()}
async function requestCamera(){try{if(!navigator.mediaDevices?.getUserMedia)throw new Error('Not supported');const s=await navigator.mediaDevices.getUserMedia({video:{facingMode:state.facing,width:{ideal:1920},height:{ideal:1080}},audio:false});state.stream=s;state.active=true;video.srcObject=s;await new Promise(r=>{video.onloadedmetadata=()=>video.play().then(r).catch(r)});document.getElementById('permission-state').classList.add('hidden');document.getElementById('error-state').classList.add('hidden');document.getElementById('scan-overlay').style.display='block';document.getElementById('scan-controls').style.display='block';document.getElementById('scan-hint').style.display='block'}catch(e){showCameraError(e)}}
function showCameraError(e){document.getElementById('permission-state').classList.add('hidden');document.getElementById('error-state').classList.remove('hidden');let m='Unable to access camera.';if(e.name==='NotAllowedError')m='Permission denied. Enable in settings.';else if(e.name==='NotFoundError')m='No camera found.';else if(e.name==='OverconstrainedError'){tryBasic();return}document.getElementById('error-message').textContent=m}
async function tryBasic(){try{const s=await navigator.mediaDevices.getUserMedia({video:true});state.stream=s;state.active=true;video.srcObject=s;await video.play();document.getElementById('permission-state').classList.add('hidden');document.getElementById('error-state').classList.add('hidden');document.getElementById('scan-overlay').style.display='block';document.getElementById('scan-controls').style.display='block';document.getElementById('scan-hint').style.display='block'}catch(e){showCameraError(e)}}
function stopCamera(){if(state.stream){state.stream.getTracks().forEach(t=>t.stop());state.stream=null}state.active=false;video.srcObject=null}
async function flipCamera(){state.facing=state.facing==='environment'?'user':'environment';stopCamera();await requestCamera()}
function capture(){if(!state.active)return;canvas.width=video.videoWidth;canvas.height=video.videoHeight;ctx.drawImage(video,0,0);showResults(canvas.toDataURL('image/jpeg',0.8))}
function handleGallery(e){const f=e.target.files[0];if(!f)return;const r=new FileReader();r.onload=ev=>showResults(ev.target.result);r.readAsDataURL(f);e.target.value=''}
async function analyze(img){const b64=img.replace(/^data:image\/\w+;base64,/,'');const res=await fetch('https://api.anthropic.com/v1/messages',{method:'POST',headers:{'Content-Type':'application/json','x-api-key':API_KEY,'anthropic-version':'2023-06-01','anthropic-dangerous-direct-browser-access':'true'},body:JSON.stringify({model:'claude-sonnet-4-20250514',max_tokens:1024,messages:[{role:'user',content:[{type:'image',source:{type:'base64',media_type:'image/jpeg',data:b64}},{type:'text',text:'Identify all food items. Return ONLY JSON array: [{"name":"Item","emoji":"üçé","category":"fruits|vegetables|dairy|meat|grains|beverages|condiments|snacks|frozen|other","quantity":"2 pieces","expiresIn":7}] If no food, return [].'}]}]})});if(!res.ok)throw new Error((await res.json().catch(()=>({}))).error?.message||'Failed');const d=await res.json();return JSON.parse((d.content.find(c=>c.type==='text')?.text||'[]').replace(/```json\n?|```\n?/g,''))}
function showResults(img){document.getElementById('captured-image').src=img;document.getElementById('results-bg').classList.add('active');document.getElementById('results-modal').classList.add('active');document.getElementById('analyzing').style.display='block';document.getElementById('detected-items').style.display='none';document.getElementById('results-actions').style.display='none';runAnalysis(img)}
async function runAnalysis(img){if(!API_KEY){demoAnalysis();return}try{const items=await analyze(img);if(!items.length){document.getElementById('analyzing').innerHTML='<div style="font-size:48px;margin-bottom:12px">ü§î</div><h3>No Food Found</h3><p style="color:var(--muted)">Try again with visible food</p>';document.getElementById('results-actions').style.display='flex';document.getElementById('add-to-pantry').style.display='none';return}state.detected=items.map((i,x)=>({...i,id:Date.now()+x,selected:true}));document.getElementById('analyzing').style.display='none';document.getElementById('add-to-pantry').style.display='block';renderDetected();document.getElementById('detected-items').style.display='block';document.getElementById('results-actions').style.display='flex'}catch(e){document.getElementById('analyzing').innerHTML=`<div style="font-size:48px;margin-bottom:12px">‚ö†Ô∏è</div><h3>Analysis Failed</h3><p style="color:var(--muted);margin-bottom:16px">${e.message}</p><button class="results-btn primary" onclick="runAnalysis(document.getElementById('captured-image').src)">Try Again</button>`}}
function demoAnalysis(){const demo=[{name:'Banana',emoji:'üçå',category:'fruits',quantity:'3'},{name:'Eggs',emoji:'ü•ö',category:'dairy',quantity:'6'},{name:'Milk',emoji:'ü•õ',category:'dairy',quantity:'1 gallon'},{name:'Cheese',emoji:'üßÄ',category:'dairy',quantity:'1 block'},{name:'Chicken',emoji:'üçó',category:'meat',quantity:'1 lb'},{name:'Bread',emoji:'üçû',category:'grains',quantity:'1 loaf'}];const n=Math.floor(Math.random()*3)+3;state.detected=demo.sort(()=>0.5-Math.random()).slice(0,n).map((i,x)=>({...i,id:Date.now()+x,expiresIn:Math.floor(Math.random()*10)+3,selected:true}));setTimeout(()=>{document.getElementById('analyzing').style.display='none';renderDetected();document.getElementById('detected-items').style.display='block';document.getElementById('results-actions').style.display='flex'},1500)}
function closeResults(){document.getElementById('results-bg').classList.remove('active');document.getElementById('results-modal').classList.remove('active')}
function renderDetected(){const c=document.getElementById('detected-items');c.innerHTML=state.detected.map(i=>`<div class="detected-item"><span class="emoji">${i.emoji}</span><div class="info"><div class="name">${i.name}</div><div class="qty">${i.quantity}</div></div><div class="check ${i.selected?'checked':''}" data-id="${i.id}">${i.selected?'‚úì':''}</div></div>`).join('');c.querySelectorAll('.check').forEach(ch=>ch.addEventListener('click',()=>{const id=+ch.dataset.id,item=state.detected.find(x=>x.id===id);if(item){item.selected=!item.selected;ch.classList.toggle('checked');ch.textContent=item.selected?'‚úì':''}}))}
function addToPantry(){const sel=state.detected.filter(i=>i.selected);if(!sel.length){toast('No items selected','error');return}sel.forEach(i=>state.pantry.push({id:i.id,name:i.name,emoji:i.emoji,category:i.category,quantity:i.quantity,expiresIn:i.expiresIn||7}));save();closeResults();closeScanner();toast(`${sel.length} item${sel.length>1?'s':''} added`);updateExpiring();updateHomeRecipes();updateCounts()}
const obSlides=[{i:'üì∑',t:'Scan Your Fridge',p:'Point your camera at your fridge and let AI identify all your ingredients.'},{i:'üç≥',t:'Get Recipe Ideas',p:'We suggest recipes based on what you have. No more wondering what to cook!'},{i:'üõí',t:'Smart Grocery Lists',p:'Missing ingredients? Add them with one tap and share with family.'}];
function showOnboarding(){if(localStorage.getItem('ob_done'))return;document.getElementById('onboarding').classList.add('active');renderOb()}
function renderOb(){const s=obSlides[state.obStep];document.getElementById('ob-icon').textContent=s.i;document.getElementById('ob-title').textContent=s.t;document.getElementById('ob-text').textContent=s.p;document.querySelectorAll('.onboarding-dot').forEach((d,i)=>d.classList.toggle('active',i===state.obStep));document.getElementById('ob-next').textContent=state.obStep===obSlides.length-1?'Get Started':'Next'}
function nextOb(){if(state.obStep<obSlides.length-1){state.obStep++;renderOb()}else{localStorage.setItem('ob_done','true');document.getElementById('onboarding').classList.remove('active')}}
// Legal/Settings
function openLegal(page){document.querySelectorAll('.legal-modal').forEach(m=>m.classList.remove('active'));const modal=document.getElementById(`${page}-modal`);if(modal){modal.classList.add('active');if(page==='api')updateApiStatus()}}
function closeLegal(){document.querySelectorAll('.legal-modal').forEach(m=>m.classList.remove('active'))}
function updateApiStatus(){const el=document.getElementById('api-status-text');const input=document.getElementById('api-key-input-settings');if(API_KEY){el.innerHTML='<span style="color:var(--green)">‚úì API key configured</span>';input.value=API_KEY}else{el.innerHTML='<span style="color:var(--orange)">No API key configured</span>';input.value=''}}
function saveKeyFromSettings(){const k=document.getElementById('api-key-input-settings').value.trim();if(k&&k.startsWith('sk-ant-')){API_KEY=k;localStorage.setItem('mealmate_api_key',k);updateApiStatus();toast('API key saved!')}else{toast('Invalid key format','error')}}
function removeApiKey(){if(confirm('Remove API key?')){API_KEY='';localStorage.removeItem('mealmate_api_key');updateApiStatus();toast('API key removed')}}
function clearAllData(){if(confirm('Delete all data? This cannot be undone.')){localStorage.clear();state.pantry=[];state.grocery=[];save();updateExpiring();updateHomeRecipes();updateCounts();closeLegal();toast('All data cleared')}}
let logoTaps=0,logoTimer=null;
function handleLogo(){logoTaps++;clearTimeout(logoTimer);logoTimer=setTimeout(()=>logoTaps=0,2000);if(logoTaps>=5){logoTaps=0;document.getElementById('api-banner').classList.add('show');toast('üîë API Settings unlocked')}}
function saveKey(){const k=document.getElementById('api-key-input').value.trim();if(k&&k.startsWith('sk-ant-')){API_KEY=k;localStorage.setItem('mealmate_api_key',k);document.getElementById('api-banner').classList.remove('show');toast('API key saved!')}else toast('Invalid key','error')}
document.addEventListener('DOMContentLoaded',()=>{
document.getElementById('greeting-time').textContent=greeting();
updateExpiring();updateHomeRecipes();updateCounts();showOnboarding();
document.querySelectorAll('.nav-item[data-view]').forEach(n=>n.addEventListener('click',()=>switchView(n.dataset.view)));
document.querySelectorAll('.action[data-view]').forEach(n=>n.addEventListener('click',()=>switchView(n.dataset.view)));
document.getElementById('view-pantry-link').addEventListener('click',()=>switchView('pantry'));
document.getElementById('view-recipes-link').addEventListener('click',()=>switchView('recipes'));
document.querySelectorAll('.recipe-tab').forEach(tab=>tab.addEventListener('click',()=>{document.querySelectorAll('.recipe-tab').forEach(t=>t.classList.remove('active'));tab.classList.add('active');renderRecipes(tab.dataset.filter)}));
document.getElementById('open-scanner').addEventListener('click',openScanner);
document.getElementById('open-scanner-pantry').addEventListener('click',openScanner);
document.getElementById('nav-scan').addEventListener('click',openScanner);
document.getElementById('close-scanner').addEventListener('click',closeScanner);
document.getElementById('request-camera').addEventListener('click',requestCamera);
document.getElementById('retry-camera').addEventListener('click',requestCamera);
document.getElementById('capture-btn').addEventListener('click',capture);
document.getElementById('flip-camera').addEventListener('click',flipCamera);
document.getElementById('gallery-btn').addEventListener('click',()=>document.getElementById('gallery-input').click());
document.getElementById('gallery-input').addEventListener('change',handleGallery);
document.getElementById('results-close').addEventListener('click',closeResults);
document.getElementById('results-bg').addEventListener('click',closeResults);
document.getElementById('scan-more').addEventListener('click',()=>{closeResults();openScanner()});
document.getElementById('add-to-pantry').addEventListener('click',addToPantry);
document.getElementById('recipe-modal-close').addEventListener('click',closeRecipe);
document.getElementById('recipe-start').addEventListener('click',()=>{closeRecipe();toast('Enjoy cooking! üë©‚Äçüç≥')});
document.getElementById('grocery-add-btn').addEventListener('click',()=>{const inp=document.getElementById('grocery-add-input');if(inp.value.trim()){addGrocery(inp.value.trim());inp.value='';renderGrocery();toast('Item added')}});
document.getElementById('grocery-add-input').addEventListener('keypress',e=>{if(e.key==='Enter')document.getElementById('grocery-add-btn').click()});
document.getElementById('clear-grocery').addEventListener('click',clearGrocery);
document.getElementById('share-grocery').addEventListener('click',shareGrocery);
document.querySelector('.logo').addEventListener('click',handleLogo);
document.getElementById(
